<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Shaun Harker">
<title>DSGRN Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>DSGRN Documentation</h1>
<div class="details">
<span id="author" class="author">Shaun Harker</span><br>
<span id="email" class="email"><a href="mailto:sharker@math.rutgers.edu">sharker@math.rutgers.edu</a></span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2015-05-21</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_purpose">Purpose</a></li>
<li><a href="#_installation">Installation</a></li>
<li><a href="#_dependencies">Dependencies</a></li>
<li><a href="#_about_the_installation">About the installation</a>
<ul class="sectlevel2">
<li><a href="#_mac_os_x">Mac OS X:</a></li>
<li><a href="#_linux">Linux:</a></li>
</ul>
</li>
<li><a href="#_network_components">Network Components</a>
<ul class="sectlevel2">
<li><a href="#_logics_and_partitions">Logics and Partitions</a></li>
<li><a href="#_description_files">Description Files</a></li>
</ul>
</li>
<li><a href="#_parameter_representation">Parameter Representation</a>
<ul class="sectlevel2">
<li><a href="#_binning_representation">Binning Representation</a></li>
<li><a href="#_hex_representation">Hex Representation</a></li>
<li><a href="#_comparison">Comparison</a></li>
<li><a href="#_conversion">Conversion</a></li>
</ul>
</li>
<li><a href="#_networks">Networks</a>
<ul class="sectlevel2">
<li><a href="#_network_spec_files">Network Spec Files</a></li>
<li><a href="#_network_builder">Network Builder</a></li>
</ul>
</li>
<li><a href="#_high_level_api">High-level API</a>
<ul class="sectlevel2">
<li><a href="#_dsgrn_tutorial">DSGRN Tutorial</a></li>
<li><a href="#_database_tutorial">Database Tutorial</a></li>
</ul>
</li>
<li><a href="#_low_level_api">Low-level API</a>
<ul class="sectlevel2">
<li><a href="#_network_interface">Network Interface</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_purpose">Purpose</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here we document technical information regarding the <a href="https://github.com/shaunharker/DSGRN">DSGRN</a> (<em>Dynamic Signatures Generated by Regulatory Networks</em>) project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The installation proceeds in two stages.
First, install the prerequisites.
Second, build and install the DSGRN software.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The dependencies are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>C++11 compiler</p>
</li>
<li>
<p>Boost 1.58</p>
</li>
<li>
<p>Open MPI</p>
</li>
<li>
<p><a href="https://github.com/shaunharker/cluster-delegator.git">cluster-delegator</a></p>
</li>
<li>
<p>sqlite3</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_the_installation">About the installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DSGRN is installed by invoking the <code>install.sh</code> script in the source root.
The location it installed is determined by the so-called installation prefix.
This can be specified as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>./install.sh --prefix=/opt/local</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the installation prefix is not specified than a default value is used.
This value is <code>/usr/local</code>. If, however, you do not have write privileges to <code>/usr/local</code>,
then the installer will check to see if you have a directory named <code>~/.local</code>.
If you do, then that will be the installation prefix. Otherwise the installer fails.</p>
</div>
<div class="paragraph">
<p>Assuming an installation prefix of <code>/usr/local</code> the files installed are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>  /usr/local/bin        (dsgrn)
  /usr/local/lib        (libdsgrn.a, libdsgrn.so, libdsgrn.dylib)
  /usr/local/share      (DSGRN/logic/*.dat)</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_mac_os_x">Mac OS X:</h3>
<div class="paragraph">
<p>On Mac OS X, C++11 and sqlite3 come along with the standard command line tools. For Boost and OpenMPI I recommend using the "homebrew" installer. Cluster-delegator can be retrieved from the git repository.</p>
</div>
<div class="paragraph">
<p>Example installation using homebrew:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>brew install boost
brew install openmpi
git clone https://github.com/shaunharker/cluster-delegator.git
./cluster-delegator/install.sh
git clone https://github.com/shaunharker/DSGRN.git
./DSGRN/install.sh</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_linux">Linux:</h3>
<div class="paragraph">
<p>Logs of successful Linux installations are available from Travis CI:</p>
</div>
<div class="paragraph">
<p><a href="https://travis-ci.org/shaunharker/DSGRN" class="bare">https://travis-ci.org/shaunharker/DSGRN</a></p>
</div>
<div class="paragraph">
<p>You may find the included scripts</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>  ./.travis.yml
  ./.install/boost.sh
  ./.install/openmpi.sh
  ./.install/sqlite3.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>useful.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_network_components">Network Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A network component is a building block of a network. It consists of a node, the number of input edges, the number of output edges, and a <em>logic</em>, which is an algebraic combination of variables associated with the input edges. In particular, we assume this algebraic combination is a product of sums, each input variable occurs precisely once, and all coefficients are unity.</p>
</div>
<div class="sect2">
<h3 id="_logics_and_partitions">Logics and Partitions</h3>
<div class="paragraph">
<p>The logic \(L\), as a product of sums, can be associated with a partitioning of the inputs into \(k\) groups of sizes \(p_1, p_2, p_3, \cdots, p_k\), where \(p_1 + p_2 + p_3 + ... + p_k = n\) and without loss \(p_1 \leq p_2 \leq p_3 \leq \cdots \leq p_k\). We call \((p_1, p_2, \cdots, p_k)\) the <em>partition associated with the logic</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_files">Description Files</h3>
<div class="paragraph">
<p>Given a network node, its <em>description triple</em> is the tuple \((n,m,(p_1, p_2, \cdots, p_k))\) where \(n\) is the number of inputs, \(m\) is the number of outputs, and \((p_1, p_2, \cdots, p_k)\) is the partition associated with the logic.</p>
</div>
<div class="paragraph">
<p>We maintain a repository of files which contain information about various network components. They are named in accordance to their description triple, using underscores as separators:</p>
</div>
<div class="paragraph">
<p><code>n_m_p1_p2_p3_..._pk</code></p>
</div>
<div class="paragraph">
<p>To clarify we give an example. Consider a network node named X1 with 3 inputs (X0, X3, and X4) and 2 outputs (X2 and X5), with a logic of \((\mathrm{X3}+\mathrm{X0})\mathrm{X4}\). See the following figure:</p>
</div>
<div id="NetworkComponentExample" class="imageblock">
<div class="content">
<img src="doc/images/network_component.png" alt="Network Component Example">
</div>
<div class="title">Figure 1. Network Component Example</div>
</div>
<div class="paragraph">
<p>Then we have \(n = 3\), \(m = 2\), and the logic \(L\) is associated with a partition of \(n\) into \(k=2\) groups of sizes \(p_1 = 1\) and \(p_2 = 2\). This results in the following name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">3_2_1_2.txt</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parameter_representation">Parameter Representation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A parameter can be understood as a set of inequalities between various input combinations and output thresholds for a network node. We give two conventions for representing parameters. The first is the <em>binning representation</em> and the second is the <em>hex representation</em>. The binning representation is more succinct, but we will prefer the hex representation because it lends itself to a more convenient comparison of parameters.</p>
</div>
<div class="sect2">
<h3 id="_binning_representation">Binning Representation</h3>
<div class="paragraph">
<p>The <em>binning representation</em> of a parameter arises by giving the <em>bin</em> for each of the \(2^n\) input combinations. A bin is a number in \(\{0,1,\cdots,m\}\) which determines the comparison between the input combination and the output edge. In particular a bin number of \(k\) indicates that the input combination activates edges \(j\) for \(j &lt; k\). More precisely, a <em>binning representation</em> of parameter is the function</p>
</div>
<div class="paragraph">
<p>\(p: \{0,1\}^n \rightarrow \{0,1,\cdots,m\},\)</p>
</div>
<div class="paragraph">
<p>where \(p(i) &gt; j\) iff the input combination \(i\) activates edge \(j\).</p>
</div>
<div class="paragraph">
<p>Programmatically, \(p\) may be encoded as an array of \(2^n\) binning values. For example in our C++ implementation we store the binning representation as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp" data-lang="cpp">std::vector&lt;int64_t&gt; bin_;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This is not as space efficient as possible. A more careful implementation would only require \(2^n \lceil \log_2 m \rceil\) bits rather than \(64 \cdot 2^n\).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_hex_representation">Hex Representation</h3>
<div class="paragraph">
<p>In the <em>hex representation</em>, we explicitly record the status of each of the comparisons between the \(2^n\) input combinations and the \(m\) output thresholds. Generically, comparisons are either \(&lt;\) or \(&gt;,\) which we may represent respectively as the binary bits \(0\) or \(1\). Accordingly, a <em>hex representation</em> encodes a \(2^n m\) length sequence of bits as a hexadecimal code. The hex codes strings are presented in big-endian fashion, meaning that reading from left to right the most significant nybbles (4-bit characters) come first.</p>
</div>
<div class="paragraph">
<p>We choose the following convention for the ordering of the bits. For \(0 \leq i &lt; 2^n\) and \(0 \leq j &lt; m\), let \(b_{ij} = 1\) if input i activates output j and let \(b_{ij} = 0\) otherwise. We order the bits \(b_{ij}\) so that the \((mi + j)\)th binary digit (where the 0th digit is the least significant) is \(b_{ij}\).</p>
</div>
<div class="paragraph">
<p>To continue the above example (<a href="#NetworkComponentExample">Network Component Example</a>), we list the contents of the network component description file for the \((3,2,(1,2))\) component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; cat 3_2_1_2.txt | tr '\n' ' '
0000 4000 4040 4400 4440 4444 5000 5040 5050 5400 5440 5444 5450 5454 5500 5540 5544 5550 5554 5555 C000 C040 C0C0 C400 C440 C444 C4C0 C4C4 CC00 CC40 CC44 CCC0 CCC4 CCCC D000 D040 D050 D0C0 D0D0 D400 D440 D444 D450 D454 D4C0 D4C4 D4D0 D4D4 D500 D540 D544 D550 D554 D555 D5D0 D5D4 D5D5 DC00 DC40 DC44 DCC0 DCC4 DCCC DCD0 DCD4 DCDC DD00 DD40 DD44 DD50 DD54 DD55 DDC0 DDC4 DDCC DDD0 DDD4 DDD5 DDDC DDDD F000 F040 F050 F0C0 F0D0 F0F0 F400 F440 F450 F4C0 F4D0 F4D4 F4F0 F4F4 F500 F540 F550 F554 F555 F5D0 F5D4 F5D5 F5F0 F5F4 F5F5 FC00 FC40 FCC0 FCC4 FCCC FCD0 FCD4 FCDC FCF0 FCF4 FCFC FD00 FD40 FD44 FD50 FD54 FD55 FDC0 FDC4 FDCC FDD0 FDD4 FDD5 FDDC FDDD FDF0 FDF4 FDF5 FDFC FDFD FF00 FF40 FF44 FF50 FF54 FF55 FFC0 FFC4 FFCC FFD0 FFD4 FFD5 FFDC FFDD FFF0 FFF4 FFF5 FFFC FFFD FFFF</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>cat</code> command reads the file and writes it to standard output, which is piped <code>|</code> to the <code>tr '\n' ' '</code> command, which replaces newlines with spaces. In the file itself the hex codes are separated by newlines.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We see that the network component description file contains the 155 hex codes which represent the network node parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="_comparison">Comparison</h3>
<div class="paragraph">
<p>As mentioned, the binning representation (if implemented carefully) has a space advantage over the hex representation. The hex representation has its own advantages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>They can be encoded as a simple string</p>
</li>
<li>
<p>Adjacent parameters differ by one bit in this representation</p>
</li>
<li>
<p>They have meaning independent of the threshold ordering</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conversion">Conversion</h3>
<div class="paragraph">
<p>The following C++ code converts between the binning representation and the hex representation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp" data-lang="cpp">  /// hex
  ///   Return a hex code X which represents the parameter. The
  ///   hex code represents a binary string in big-endian fashion.
  ///   For 0 &lt;= i &lt; 2^n and 0 &lt;= j &lt; m, let b_{ij} be the
  ///   the (i*m + j)th binary digit of X (where the 0th digit is
  ///   the least significant).
  ///   Then b_{ij} = 1 if input i activates output j
  ///        b_{ij} = 0    otherwise
  std::string hex ( void ) const {
    std::string X;
    int64_t N = ( 1 &lt;&lt; n );
    char nybble = 0, mask = 1;
    auto flush_nybble = [&amp;] () {
      // Hex digits 0-9
      if ( nybble &lt; 10 ) X.push_back((char)(nybble + '0'));
      // Hex digits A-F
      else X.push_back((char)(nybble - 10 + 'A'));
      nybble = 0; mask = 1;
    };
    for ( int64_t i = 0; i &lt; N; ++ i ) {
      for ( int64_t j = 0; j &lt; m; ++ j ) {
        if ( bin_[i] &gt; j ) nybble |= mask;
        mask &lt;&lt;= 1; if ( mask == 16 ) flush_nybble();
      }
    }
    if ( mask != 1 ) flush_nybble ();
    // Put into big-endian form.
    std::reverse( X . begin(), X . end () );
    return result;
  }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_networks">Networks</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_network_spec_files">Network Spec Files</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div><div id="NetworkSpecFile" class="imageblock">
<div class="content">
<img src="doc/images/network_graphviz.png" alt="Network Specification File Example" width="200" height="400">
</div>
<div class="title">Figure 2. Network Specification Example</div>
</div></div></td>
<td class="tableblock halign-left valign-top" rowspan="2"><div><div class="paragraph">
<p>A <em>network specification file</em> is a text file which describes the interactions in a gene regulatory network. The specification file contains newline separated lines which describe each network node and the structure of its inputs. Each line is of the form <code>X : L</code>, where <code>X</code> is the name of the network node (which we will call the <em>target of the line</em>, and <code>L</code> is an expression corresponding to the logic. Network node names may be any sequence of alphanumeric characters. In particular, spaces are not allowed. Logic expressions are sequences of node names joined together with whitespace, parentheses, <code>+</code> signs, and <code>~</code> signs. The whitespace and parentheses are optional and ignored except as separators. Nodes appearing in a logic  are called <em>source nodes of the line</em> and indicate a repressing edge when prefixed by <code>~</code> and an activating edge otherwise. Source nodes are partitioned into <em>factors</em>: Consecutively appearing source nodes in a logic expression belong to the same factor provided there is an intervening <code>+</code> symbol, and we extend this to non-consecutive source nodes via transitive closure.  The partitioning of source nodes into factors corresponds to the partition associated with the logic of the target node.</p>
</div>
<div class="paragraph">
<p>To the left we show a graphviz-rendering of a network specification file, where the activating edges are represented by normal arrowheads, the repressing edges are represented by blunt arrowheads, and the partitioning of input edges is represented by color coding.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">X : (X + Y3) ~Z ~W1
Y1 : X
Y2 : (Y1 + W1)
Y3 : Y2(~W1)
Z : X(~W2)
W1 : Y2(~W2)
W2 : W1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Network Specification File</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The syntax for network specification files will be extended to accommodate imposition of constraints on parameters such as threshold ordering and activation ordering. These extensions will be done in a backward-compatible way.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_network_builder">Network Builder</h3>
<div class="paragraph">
<p>We provide a tool, <a href="https://shaunharker.github.io/DSGRN/software/NetworkBuilder/index.html">Network Builder</a>, for graphically constructing networks and outputting network specification files. This tool also determines the number of parameters associated with a given network. The tool is browser based&#8201;&#8212;&#8201;so in fact we can embed it in the documentation! Here it is:</p>
</div>
<iframe
  id="frame"
  src="https://shaunharker.github.io/DSGRN/software/NetworkBuilder/index.html"
  width="100%"
  height="700"
  scrolling="no">
</iframe>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_high_level_api">High-level API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dsgrn_tutorial">DSGRN Tutorial</h3>
<div class="paragraph">
<p>To begin with, we tell DSGRN what network we are interested in. Let&#8217;s study the network <code>2D_Example_C.txt</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">X : (X)(~Y)
Y : (~X)(Y)</code></pre>
</div>
</div>
<div class="paragraph">
<p>To do this we type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn network ./networks/2D_Example_C.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p>This produces a file called <code>dsgrn.session</code> in the current working directory. You can delete it when you are done. It just remembers which network we want to study. If you change directories and call <code>dsgrn</code> again, it won&#8217;t find the session file and will have forgotten about the network.</p>
</div>
<div class="paragraph">
<p>Anyhow, we can visualize the network using DSGRN by asking it for a graphviz representation of the network. To do this, we type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn network draw &gt; network.gv</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we used the shell redirection operator <code>&gt;</code> to pipe the output to the file <code>network.gv</code>. We can open this up with Graphviz and we get the following image:</p>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="80pt" height="116pt"
 viewBox="0.00 0.00 80.00 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>%3</title>
<polygon fill="aliceblue" stroke="none" points="-4,4 -4,-112 76,-112 76,4 -4,4"/>
<!-- X -->
<g id="node1" class="node"><title>X</title>
<ellipse fill="beige" stroke="black" cx="27" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-86.3" font-family="Times,serif" font-size="14.00">X</text>
</g>
<!-- X&#45;&gt;X -->
<g id="edge2" class="edge"><title>X&#45;&gt;X</title>
<path fill="none" stroke="darkgoldenrod" d="M46.895,-102.432C59.688,-105.675 72,-101.531 72,-90 72,-81.6218 65.5006,-77.1433 57.0395,-76.5644"/>
<polygon fill="darkgoldenrod" stroke="darkgoldenrod" points="56.5019,-73.1004 46.895,-77.5679 57.191,-80.0665 56.5019,-73.1004"/>
</g>
<!-- Y -->
<g id="node2" class="node"><title>Y</title>
<ellipse fill="beige" stroke="black" cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-14.3" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- X&#45;&gt;Y -->
<g id="edge4" class="edge"><title>X&#45;&gt;Y</title>
<path fill="none" stroke="darkgoldenrod" d="M21.1601,-72.411C20.1381,-63.0465 19.9768,-51.2238 20.6763,-41.0836"/>
<polygon fill="darkgoldenrod" stroke="darkgoldenrod" points="16.0529,-36.5208 26.0156,-37.3842 25.8429,-39.3767 15.8802,-38.5133 16.0529,-36.5208"/>
<polyline fill="none" stroke="darkgoldenrod" points="21.1206,-35.9562 20.6889,-40.9375 "/>
</g>
<!-- Y&#45;&gt;X -->
<g id="edge1" class="edge"><title>Y&#45;&gt;X</title>
<path fill="none" stroke="black" d="M32.8794,-35.9562C33.879,-45.3841 34.0178,-57.2161 33.2959,-67.3118"/>
<polygon fill="black" stroke="black" points="37.9091,-71.8604 27.9489,-70.9695 28.127,-68.9775 38.0873,-69.8683 37.9091,-71.8604"/>
<polyline fill="none" stroke="black" points="32.8399,-72.411 33.2853,-67.4308 "/>
</g>
<!-- Y&#45;&gt;Y -->
<g id="edge3" class="edge"><title>Y&#45;&gt;Y</title>
<path fill="none" stroke="black" d="M46.895,-30.4321C59.688,-33.6753 72,-29.5312 72,-18 72,-9.62183 65.5006,-5.14331 57.0395,-4.56444"/>
<polygon fill="black" stroke="black" points="56.5019,-1.10045 46.895,-5.56787 57.191,-8.06645 56.5019,-1.10045"/>
</g>
</g>
</svg>
<div class="paragraph">
<p>Next, we ask about parameters. Let&#8217;s find out how many parameters there are.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn parameter</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">There are 1600 parameters.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks good. Later we should add a feature that tells us how many there are for each cohort of output orderings. In this case it happens to be 4 cohorts of 400, since there are 2 output orders for both \(X\) and \(Y\).</p>
</div>
<div class="paragraph">
<p>Let&#8217;s pick a parameter out of a hat: 126. Let&#8217;s ask DSGRN about parameter 126. First, we will ask it to give us a JSON-string representing the parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn parameter json 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is telling us that for this parameter, node \(X\) has the logic <code>[2,2,"C0"]</code> associated with it (2 inputs, 2 outputs, and hex code <code>C0</code>) and the output ordering <code>[0,1]</code>. The outputs have a natural ordering inherited from the sequence in which they appear in the network file; the <code>[0,1]</code> indicates an identity permutation of this natural ordering. Thus the outputs are ordered <code>X</code> then <code>Y</code>. Had it been <code>[1,0]</code> this would mean the other way around! In general, the \(k\)th out-ordered edge is the <code>p[k]</code> th node, where <code>p</code> is the permutation array.</p>
</div>
<div class="paragraph">
<p>We can ask about which parameter inequalities this logic/order corresponds to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn parameter inequalities 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">["{
L(X,X) L(Y,X) &lt; THETA(X,X),
U(X,X) L(Y,X) &lt; THETA(X,X),
L(X,X) U(Y,X) &lt; THETA(X,X),
THETA(X,Y) &lt; U(X,X) U(Y,X)
},{
THETA(X,X) &lt; THETA(X,Y)
}",
"{
L(X,Y) L(Y,Y) &lt; THETA(Y,X),
U(X,Y) L(Y,Y) &lt; THETA(Y,X),
L(X,Y) U(Y,Y) &lt; THETA(Y,X),
THETA(Y,Y) &lt; U(X,Y) U(Y,Y)
},{
THETA(Y,X) &lt; THETA(Y,Y)
}"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Neat. Let&#8217;s try to turn around and find out the index (i.e. 126) from the JSON-string it hands us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn parameter index '[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">libc++abi.dylib: terminating with uncaught exception of type std::runtime_error: Feature not implemented</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Oh no!</em> The function to make indices out of the internal representation of parameters hasnt been written yet. Dont worry, this will be implemented soon. (Maybe it already has been and I havent gotten around to updating this doc yet!) In the meantime, how do we know the internal representation is correct? Well, we can print out the parameter inequalities:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn parameter inequalities '[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">["{
L(X,X) L(Y,X) &lt; THETA(X,X),
U(X,X) L(Y,X) &lt; THETA(X,X),
L(X,X) U(Y,X) &lt; THETA(X,X),
THETA(X,Y) &lt; U(X,X) U(Y,X)
},{
THETA(X,X) &lt; THETA(X,Y)
}",
"{
L(X,Y) L(Y,Y) &lt; THETA(Y,X),
U(X,Y) L(Y,Y) &lt; THETA(Y,X),
L(X,Y) U(Y,Y) &lt; THETA(Y,X),
THETA(Y,Y) &lt; U(X,Y) U(Y,Y)
},{
THETA(Y,X) &lt; THETA(Y,Y)
}"]</code></pre>
</div>
</div>
<div class="paragraph">
<p>They are the same. Hooray!</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s start doing dynamics. We can ask it to create a domain graph:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn domaingraph json '[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[[0],[2],[2],[0],[1,3],[2,4],[6],[6],[5,7]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we had asked for json output, so what we have is a nested json array giving an adjacency list representation of the domain graph. This is not visually appealing, so let&#8217;s ask for a graphviz representation instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn domaingraph graphviz '[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]] &gt; dg.gv</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we used <code>&gt;</code> to pipe the output to the file dg.gv. We can open this up with Graphviz and we get the following image:</p>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="188pt" height="332pt"
 viewBox="0.00 0.00 188.00 332.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 328)">
<title>%3</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-328 184,-328 184,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node"><title>0</title>
<ellipse fill="none" stroke="black" cx="135" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="135" y="-14.3" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- 0&#45;&gt;0 -->
<g id="edge1" class="edge"><title>0&#45;&gt;0</title>
<path fill="none" stroke="black" d="M154.895,-30.4321C167.688,-33.6753 180,-29.5312 180,-18 180,-9.62183 173.501,-5.14331 165.039,-4.56444"/>
<polygon fill="black" stroke="black" points="164.502,-1.10045 154.895,-5.56787 165.191,-8.06645 164.502,-1.10045"/>
</g>
<!-- 1 -->
<g id="node2" class="node"><title>1</title>
<ellipse fill="none" stroke="black" cx="63" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="63" y="-86.3" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- 2 -->
<g id="node3" class="node"><title>2</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-14.3" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge2" class="edge"><title>1&#45;&gt;2</title>
<path fill="none" stroke="black" d="M54.6504,-72.7646C50.2885,-64.2831 44.8531,-53.7144 39.9587,-44.1974"/>
<polygon fill="black" stroke="black" points="42.9904,-42.4395 35.3043,-35.1473 36.7654,-45.6409 42.9904,-42.4395"/>
</g>
<!-- 2&#45;&gt;2 -->
<g id="edge3" class="edge"><title>2&#45;&gt;2</title>
<path fill="none" stroke="black" d="M46.895,-30.4321C59.688,-33.6753 72,-29.5312 72,-18 72,-9.62183 65.5006,-5.14331 57.0395,-4.56444"/>
<polygon fill="black" stroke="black" points="56.5019,-1.10045 46.895,-5.56787 57.191,-8.06645 56.5019,-1.10045"/>
</g>
<!-- 3 -->
<g id="node4" class="node"><title>3</title>
<ellipse fill="none" stroke="black" cx="135" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="135" y="-86.3" font-family="Times,serif" font-size="14.00">3</text>
</g>
<!-- 3&#45;&gt;0 -->
<g id="edge4" class="edge"><title>3&#45;&gt;0</title>
<path fill="none" stroke="black" d="M135,-71.6966C135,-63.9827 135,-54.7125 135,-46.1124"/>
<polygon fill="black" stroke="black" points="138.5,-46.1043 135,-36.1043 131.5,-46.1044 138.5,-46.1043"/>
</g>
<!-- 4 -->
<g id="node5" class="node"><title>4</title>
<ellipse fill="none" stroke="black" cx="63" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="63" y="-158.3" font-family="Times,serif" font-size="14.00">4</text>
</g>
<!-- 4&#45;&gt;1 -->
<g id="edge5" class="edge"><title>4&#45;&gt;1</title>
<path fill="none" stroke="black" d="M63,-143.697C63,-135.983 63,-126.712 63,-118.112"/>
<polygon fill="black" stroke="black" points="66.5001,-118.104 63,-108.104 59.5001,-118.104 66.5001,-118.104"/>
</g>
<!-- 4&#45;&gt;3 -->
<g id="edge6" class="edge"><title>4&#45;&gt;3</title>
<path fill="none" stroke="black" d="M77.5703,-146.834C87.7499,-136.938 101.524,-123.546 113.031,-112.359"/>
<polygon fill="black" stroke="black" points="115.474,-114.865 120.204,-105.385 110.595,-109.846 115.474,-114.865"/>
</g>
<!-- 5 -->
<g id="node6" class="node"><title>5</title>
<ellipse fill="none" stroke="black" cx="63" cy="-234" rx="27" ry="18"/>
<text text-anchor="middle" x="63" y="-230.3" font-family="Times,serif" font-size="14.00">5</text>
</g>
<!-- 5&#45;&gt;2 -->
<g id="edge7" class="edge"><title>5&#45;&gt;2</title>
<path fill="none" stroke="black" d="M49.2496,-218.069C41.0392,-208.1 31.381,-194.247 27,-180 13.0495,-134.634 17.6057,-78.6157 22.2554,-46.0362"/>
<polygon fill="black" stroke="black" points="25.7481,-46.3512 23.8093,-35.9353 18.8294,-45.2869 25.7481,-46.3512"/>
</g>
<!-- 5&#45;&gt;4 -->
<g id="edge8" class="edge"><title>5&#45;&gt;4</title>
<path fill="none" stroke="black" d="M63,-215.697C63,-207.983 63,-198.712 63,-190.112"/>
<polygon fill="black" stroke="black" points="66.5001,-190.104 63,-180.104 59.5001,-190.104 66.5001,-190.104"/>
</g>
<!-- 6 -->
<g id="node7" class="node"><title>6</title>
<ellipse fill="none" stroke="black" cx="135" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="135" y="-158.3" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- 6&#45;&gt;6 -->
<g id="edge9" class="edge"><title>6&#45;&gt;6</title>
<path fill="none" stroke="black" d="M154.895,-174.432C167.688,-177.675 180,-173.531 180,-162 180,-153.622 173.501,-149.143 165.039,-148.564"/>
<polygon fill="black" stroke="black" points="164.502,-145.1 154.895,-149.568 165.191,-152.066 164.502,-145.1"/>
</g>
<!-- 7 -->
<g id="node8" class="node"><title>7</title>
<ellipse fill="none" stroke="black" cx="135" cy="-234" rx="27" ry="18"/>
<text text-anchor="middle" x="135" y="-230.3" font-family="Times,serif" font-size="14.00">7</text>
</g>
<!-- 7&#45;&gt;6 -->
<g id="edge10" class="edge"><title>7&#45;&gt;6</title>
<path fill="none" stroke="black" d="M135,-215.697C135,-207.983 135,-198.712 135,-190.112"/>
<polygon fill="black" stroke="black" points="138.5,-190.104 135,-180.104 131.5,-190.104 138.5,-190.104"/>
</g>
<!-- 8 -->
<g id="node9" class="node"><title>8</title>
<ellipse fill="none" stroke="black" cx="99" cy="-306" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-302.3" font-family="Times,serif" font-size="14.00">8</text>
</g>
<!-- 8&#45;&gt;5 -->
<g id="edge11" class="edge"><title>8&#45;&gt;5</title>
<path fill="none" stroke="black" d="M90.6504,-288.765C86.2885,-280.283 80.8531,-269.714 75.9587,-260.197"/>
<polygon fill="black" stroke="black" points="78.9904,-258.439 71.3043,-251.147 72.7654,-261.641 78.9904,-258.439"/>
</g>
<!-- 8&#45;&gt;7 -->
<g id="edge12" class="edge"><title>8&#45;&gt;7</title>
<path fill="none" stroke="black" d="M107.35,-288.765C111.712,-280.283 117.147,-269.714 122.041,-260.197"/>
<polygon fill="black" stroke="black" points="125.235,-261.641 126.696,-251.147 119.01,-258.439 125.235,-261.641"/>
</g>
</g>
</svg>
<div class="paragraph">
<p>We might improve this by setting the positions using the actual positions of domain in space (though it isn&#8217;t clear the best way to do this for higher than 2 dimensions).</p>
</div>
<div class="paragraph">
<p>And we could also pass the parameter by its index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn domaingraph json 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[[0],[2],[2],[0],[1,3],[2,4],[6],[6],[5,7]]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn domaingraph graphviz 126</code></pre>
</div>
</div>
<div class="paragraph">
<p>Very similarly, we can also get wall graphs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn wallgraph json 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[[12,1],[13],[12],[2],[1],[3,4],[13],[2,14],[14],[3,4,8],[8],[5,6],[],[],[]]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn wallgraph graphviz 126 &gt; wg.gv</code></pre>
</div>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.38.0 (20140413.2041)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="405pt" height="332pt"
 viewBox="0.00 0.00 405.00 332.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 328)">
<title>%3</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-328 401,-328 401,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node"><title>0</title>
<ellipse fill="none" stroke="black" cx="154" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="154" y="-157.8" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- 1 -->
<g id="node2" class="node"><title>1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-85.8" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- 0&#45;&gt;1 -->
<g id="edge2" class="edge"><title>0&#45;&gt;1</title>
<path fill="none" stroke="black" d="M142.066,-145.811C134.786,-136.546 125.337,-124.52 117.146,-114.094"/>
<polygon fill="black" stroke="black" points="119.841,-111.86 110.911,-106.159 114.337,-116.185 119.841,-111.86"/>
</g>
<!-- 12 -->
<g id="node13" class="node"><title>12</title>
<ellipse fill="none" stroke="black" cx="186" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="186" y="-13.8" font-family="Times,serif" font-size="14.00">12</text>
</g>
<!-- 0&#45;&gt;12 -->
<g id="edge1" class="edge"><title>0&#45;&gt;12</title>
<path fill="none" stroke="black" d="M157.796,-144.153C163.282,-119.813 173.478,-74.5681 179.991,-45.6651"/>
<polygon fill="black" stroke="black" points="183.424,-46.3498 182.208,-35.825 176.596,-44.8109 183.424,-46.3498"/>
</g>
<!-- 13 -->
<g id="node14" class="node"><title>13</title>
<ellipse fill="none" stroke="black" cx="74" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="74" y="-13.8" font-family="Times,serif" font-size="14.00">13</text>
</g>
<!-- 1&#45;&gt;13 -->
<g id="edge3" class="edge"><title>1&#45;&gt;13</title>
<path fill="none" stroke="black" d="M93.0753,-72.411C90.2218,-64.4211 86.7292,-54.6417 83.516,-45.6447"/>
<polygon fill="black" stroke="black" points="86.7153,-44.1964 80.0558,-35.9562 80.1231,-46.5508 86.7153,-44.1964"/>
</g>
<!-- 2 -->
<g id="node3" class="node"><title>2</title>
<ellipse fill="none" stroke="black" cx="226" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="226" y="-85.8" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- 2&#45;&gt;12 -->
<g id="edge4" class="edge"><title>2&#45;&gt;12</title>
<path fill="none" stroke="black" d="M216.723,-72.7646C211.826,-64.1948 205.711,-53.494 200.229,-43.9004"/>
<polygon fill="black" stroke="black" points="203.227,-42.0932 195.227,-35.1473 197.15,-45.5663 203.227,-42.0932"/>
</g>
<!-- 3 -->
<g id="node4" class="node"><title>3</title>
<ellipse fill="none" stroke="black" cx="226" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="226" y="-157.8" font-family="Times,serif" font-size="14.00">3</text>
</g>
<!-- 3&#45;&gt;2 -->
<g id="edge5" class="edge"><title>3&#45;&gt;2</title>
<path fill="none" stroke="black" d="M226,-143.697C226,-135.983 226,-126.712 226,-118.112"/>
<polygon fill="black" stroke="black" points="229.5,-118.104 226,-108.104 222.5,-118.104 229.5,-118.104"/>
</g>
<!-- 4 -->
<g id="node5" class="node"><title>4</title>
<ellipse fill="none" stroke="black" cx="82" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="82" y="-157.8" font-family="Times,serif" font-size="14.00">4</text>
</g>
<!-- 4&#45;&gt;1 -->
<g id="edge6" class="edge"><title>4&#45;&gt;1</title>
<path fill="none" stroke="black" d="M86.1152,-144.055C88.0081,-136.261 90.3004,-126.822 92.4237,-118.079"/>
<polygon fill="black" stroke="black" points="95.8457,-118.819 94.8046,-108.275 89.0434,-117.167 95.8457,-118.819"/>
</g>
<!-- 5 -->
<g id="node6" class="node"><title>5</title>
<ellipse fill="none" stroke="black" cx="82" cy="-234" rx="27" ry="18"/>
<text text-anchor="middle" x="82" y="-229.8" font-family="Times,serif" font-size="14.00">5</text>
</g>
<!-- 5&#45;&gt;3 -->
<g id="edge7" class="edge"><title>5&#45;&gt;3</title>
<path fill="none" stroke="black" d="M103.248,-222.671C127.602,-210.832 167.719,-191.331 195.428,-177.862"/>
<polygon fill="black" stroke="black" points="197.202,-180.891 204.665,-173.371 194.141,-174.595 197.202,-180.891"/>
</g>
<!-- 5&#45;&gt;4 -->
<g id="edge8" class="edge"><title>5&#45;&gt;4</title>
<path fill="none" stroke="black" d="M82,-215.697C82,-207.983 82,-198.712 82,-190.112"/>
<polygon fill="black" stroke="black" points="85.5001,-190.104 82,-180.104 78.5001,-190.104 85.5001,-190.104"/>
</g>
<!-- 6 -->
<g id="node7" class="node"><title>6</title>
<ellipse fill="none" stroke="black" cx="27" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-85.8" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- 6&#45;&gt;13 -->
<g id="edge9" class="edge"><title>6&#45;&gt;13</title>
<path fill="none" stroke="black" d="M37.665,-73.1159C43.5541,-64.345 50.9944,-53.2637 57.6062,-43.4162"/>
<polygon fill="black" stroke="black" points="60.7086,-45.0745 63.3772,-34.8212 54.897,-41.1724 60.7086,-45.0745"/>
</g>
<!-- 7 -->
<g id="node8" class="node"><title>7</title>
<ellipse fill="none" stroke="black" cx="298" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="298" y="-157.8" font-family="Times,serif" font-size="14.00">7</text>
</g>
<!-- 7&#45;&gt;2 -->
<g id="edge10" class="edge"><title>7&#45;&gt;2</title>
<path fill="none" stroke="black" d="M283.43,-146.834C273.25,-136.938 259.476,-123.546 247.969,-112.359"/>
<polygon fill="black" stroke="black" points="250.405,-109.846 240.796,-105.385 245.526,-114.865 250.405,-109.846"/>
</g>
<!-- 14 -->
<g id="node15" class="node"><title>14</title>
<ellipse fill="none" stroke="black" cx="334" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="334" y="-85.8" font-family="Times,serif" font-size="14.00">14</text>
</g>
<!-- 7&#45;&gt;14 -->
<g id="edge11" class="edge"><title>7&#45;&gt;14</title>
<path fill="none" stroke="black" d="M306.35,-144.765C310.712,-136.283 316.147,-125.714 321.041,-116.197"/>
<polygon fill="black" stroke="black" points="324.235,-117.641 325.696,-107.147 318.01,-114.439 324.235,-117.641"/>
</g>
<!-- 8 -->
<g id="node9" class="node"><title>8</title>
<ellipse fill="none" stroke="black" cx="370" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="370" y="-157.8" font-family="Times,serif" font-size="14.00">8</text>
</g>
<!-- 8&#45;&gt;14 -->
<g id="edge12" class="edge"><title>8&#45;&gt;14</title>
<path fill="none" stroke="black" d="M361.65,-144.765C357.288,-136.283 351.853,-125.714 346.959,-116.197"/>
<polygon fill="black" stroke="black" points="349.99,-114.439 342.304,-107.147 343.765,-117.641 349.99,-114.439"/>
</g>
<!-- 9 -->
<g id="node10" class="node"><title>9</title>
<ellipse fill="none" stroke="black" cx="226" cy="-234" rx="27" ry="18"/>
<text text-anchor="middle" x="226" y="-229.8" font-family="Times,serif" font-size="14.00">9</text>
</g>
<!-- 9&#45;&gt;3 -->
<g id="edge13" class="edge"><title>9&#45;&gt;3</title>
<path fill="none" stroke="black" d="M226,-215.697C226,-207.983 226,-198.712 226,-190.112"/>
<polygon fill="black" stroke="black" points="229.5,-190.104 226,-180.104 222.5,-190.104 229.5,-190.104"/>
</g>
<!-- 9&#45;&gt;4 -->
<g id="edge14" class="edge"><title>9&#45;&gt;4</title>
<path fill="none" stroke="black" d="M204.752,-222.671C180.398,-210.832 140.281,-191.331 112.572,-177.862"/>
<polygon fill="black" stroke="black" points="113.859,-174.595 103.335,-173.371 110.798,-180.891 113.859,-174.595"/>
</g>
<!-- 9&#45;&gt;8 -->
<g id="edge15" class="edge"><title>9&#45;&gt;8</title>
<path fill="none" stroke="black" d="M247.248,-222.671C271.602,-210.832 311.719,-191.331 339.428,-177.862"/>
<polygon fill="black" stroke="black" points="341.202,-180.891 348.665,-173.371 338.141,-174.595 341.202,-180.891"/>
</g>
<!-- 10 -->
<g id="node11" class="node"><title>10</title>
<ellipse fill="none" stroke="black" cx="370" cy="-234" rx="27" ry="18"/>
<text text-anchor="middle" x="370" y="-229.8" font-family="Times,serif" font-size="14.00">10</text>
</g>
<!-- 10&#45;&gt;8 -->
<g id="edge16" class="edge"><title>10&#45;&gt;8</title>
<path fill="none" stroke="black" d="M370,-215.697C370,-207.983 370,-198.712 370,-190.112"/>
<polygon fill="black" stroke="black" points="373.5,-190.104 370,-180.104 366.5,-190.104 373.5,-190.104"/>
</g>
<!-- 11 -->
<g id="node12" class="node"><title>11</title>
<ellipse fill="none" stroke="black" cx="54" cy="-306" rx="27" ry="18"/>
<text text-anchor="middle" x="54" y="-301.8" font-family="Times,serif" font-size="14.00">11</text>
</g>
<!-- 11&#45;&gt;5 -->
<g id="edge17" class="edge"><title>11&#45;&gt;5</title>
<path fill="none" stroke="black" d="M60.6356,-288.411C63.9134,-280.216 67.9442,-270.14 71.6181,-260.955"/>
<polygon fill="black" stroke="black" points="74.9477,-262.055 75.412,-251.47 68.4484,-259.455 74.9477,-262.055"/>
</g>
<!-- 11&#45;&gt;6 -->
<g id="edge18" class="edge"><title>11&#45;&gt;6</title>
<path fill="none" stroke="black" d="M51.2652,-287.834C49.6497,-277.469 47.6119,-263.989 46,-252 39.6994,-205.135 33.4853,-150.44 29.9579,-118.377"/>
<polygon fill="black" stroke="black" points="33.435,-117.975 28.8684,-108.415 26.4765,-118.736 33.435,-117.975"/>
</g>
<!-- 12&#45;&gt;12 -->
<g id="edge19" class="edge"><title>12&#45;&gt;12</title>
<path fill="none" stroke="black" d="M205.895,-30.4321C218.688,-33.6753 231,-29.5312 231,-18 231,-9.62183 224.501,-5.14331 216.039,-4.56444"/>
<polygon fill="black" stroke="black" points="215.502,-1.10045 205.895,-5.56787 216.191,-8.06645 215.502,-1.10045"/>
</g>
<!-- 13&#45;&gt;13 -->
<g id="edge20" class="edge"><title>13&#45;&gt;13</title>
<path fill="none" stroke="black" d="M93.895,-30.4321C106.688,-33.6753 119,-29.5312 119,-18 119,-9.62183 112.501,-5.14331 104.039,-4.56444"/>
<polygon fill="black" stroke="black" points="103.502,-1.10045 93.895,-5.56787 104.191,-8.06645 103.502,-1.10045"/>
</g>
<!-- 14&#45;&gt;14 -->
<g id="edge21" class="edge"><title>14&#45;&gt;14</title>
<path fill="none" stroke="black" d="M353.895,-102.432C366.688,-105.675 379,-101.531 379,-90 379,-81.6218 372.501,-77.1433 364.039,-76.5644"/>
<polygon fill="black" stroke="black" points="363.502,-73.1004 353.895,-77.5679 364.191,-80.0665 363.502,-73.1004"/>
</g>
</g>
</svg>
<div class="paragraph">
<p>Again, this might be improved by setting the position of the nodes using where the walls are in space rather than letting Graphviz choose.</p>
</div>
<div class="paragraph">
<p>Time for Morse theory. Here we ask for a Morse decomposition, which is essentially a Morse Graph which is annotated with the list of domains (the software is set up to calculate the Morse decomposition using the domain graph representation):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn morsedecomposition json 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">[[],[],[]]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hmm, this isn&#8217;t great, since it lacks the phase space annotatation. That will be fixed! Meanwhile the graphviz output does have the appropriate annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn morsedecomposition graphviz 126 &gt; md.gv</code></pre>
</div>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: g Pages: 1 -->
<svg width="206pt" height="44pt"
 viewBox="0.00 0.00 206.00 44.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>g</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-40 202,-40 202,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node"><title>0</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-14.3" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- 1 -->
<g id="node2" class="node"><title>1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-14.3" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- 2 -->
<g id="node3" class="node"><title>2</title>
<ellipse fill="none" stroke="black" cx="171" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="171" y="-14.3" font-family="Times,serif" font-size="14.00">0</text>
</g>
</g>
</svg>
<div class="paragraph">
<p>Here we see the vertices are annotated with all the domains in the strongly connected component of the domain graph. Which in this case is just singletons sets. How boring! Maybe I should have picked a more interesting example.</p>
</div>
<div class="paragraph">
<p>Next up: Morse graphs. Same drill: we can give it the parameter either by index or by json string, and we can request either json output or graphviz output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn morsegraph json 126</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">{"poset":[[],[],[]],"annotations":[["FP"],["FP"],["FP OFF"]]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn morsegraph json '[["X",[2,2,"C0"],[0,1]],["Y",[2,2,"C0"],[0,1]]]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">{"poset":[[],[],[]],"annotations":[["FP"],["FP"],["FP OFF"]]}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; dsgrn morsegraph graphviz 126</code></pre>
</div>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="231pt" height="44pt"
 viewBox="0.00 0.00 231.00 44.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 40)">
<title>%3</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-40 227,-40 227,4 -4,4"/>
<!-- 0 -->
<g id="node1" class="node"><title>0</title>
<ellipse fill="none" stroke="black" cx="27" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-14.3" font-family="Times,serif" font-size="14.00">FP</text>
</g>
<!-- 1 -->
<g id="node2" class="node"><title>1</title>
<ellipse fill="none" stroke="black" cx="99" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-14.3" font-family="Times,serif" font-size="14.00">FP</text>
</g>
<!-- 2 -->
<g id="node3" class="node"><title>2</title>
<ellipse fill="none" stroke="black" cx="184" cy="-18" rx="39.4691" ry="18"/>
<text text-anchor="middle" x="184" y="-14.3" font-family="Times,serif" font-size="14.00">FP OFF</text>
</g>
</g>
</svg>
<div class="paragraph">
<p>To wrap up, here is a summary of DSGRN&#8217;s current syntax. Any path from the green diamond to the red octagon is a valid DSGRN command:</p>
</div>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="100%" height="100%"
 viewBox="0.00 0.00 776.00 732.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 728)">
<title>%3</title>
<polygon fill="aliceblue" stroke="none" points="-4,4 -4,-728 772,-728 772,4 -4,4"/>
<!-- start -->
<g id="node1" class="node"><title>start</title>
<polygon fill="green" stroke="black" points="555,-724 528,-706 555,-688 582,-706 555,-724"/>
</g>
<!-- dsgrn -->
<g id="node9" class="node"><title>dsgrn</title>
<ellipse fill="beige" stroke="black" cx="555" cy="-634" rx="31.2965" ry="18"/>
<text text-anchor="middle" x="555" y="-630.3" font-family="Times,serif" font-size="14.00">dsgrn</text>
</g>
<!-- start&#45;&gt;dsgrn -->
<g id="edge1" class="edge"><title>start&#45;&gt;dsgrn</title>
<path fill="none" stroke="black" d="M555,-687.697C555,-679.983 555,-670.712 555,-662.112"/>
<polygon fill="black" stroke="black" points="558.5,-662.104 555,-652.104 551.5,-662.104 558.5,-662.104"/>
</g>
<!-- command -->
<g id="node2" class="node"><title>command</title>
<ellipse fill="beige" stroke="black" cx="418" cy="-418" rx="1.8" ry="1.8"/>
</g>
<!-- parameter -->
<g id="node13" class="node"><title>parameter</title>
<ellipse fill="beige" stroke="black" cx="46" cy="-346" rx="46.1964" ry="18"/>
<text text-anchor="middle" x="46" y="-342.3" font-family="Times,serif" font-size="14.00">parameter</text>
</g>
<!-- command&#45;&gt;parameter -->
<g id="edge9" class="edge"><title>command&#45;&gt;parameter</title>
<path fill="none" stroke="black" d="M416.444,-416.818C398.717,-414.725 233.059,-394.749 102,-364 98.1592,-363.099 94.1953,-362.08 90.2339,-361"/>
<polygon fill="black" stroke="black" points="91.0398,-357.59 80.4637,-358.221 89.1246,-364.323 91.0398,-357.59"/>
</g>
<!-- domaingraph -->
<g id="node14" class="node"><title>domaingraph</title>
<ellipse fill="beige" stroke="black" cx="295" cy="-346" rx="58.2422" ry="18"/>
<text text-anchor="middle" x="295" y="-342.3" font-family="Times,serif" font-size="14.00">domaingraph</text>
</g>
<!-- command&#45;&gt;domaingraph -->
<g id="edge10" class="edge"><title>command&#45;&gt;domaingraph</title>
<path fill="none" stroke="black" d="M416.619,-416.214C408.223,-411.436 363.317,-385.879 330.506,-367.207"/>
<polygon fill="black" stroke="black" points="332.036,-364.05 321.613,-362.146 328.573,-370.134 332.036,-364.05"/>
</g>
<!-- wallgraph -->
<g id="node15" class="node"><title>wallgraph</title>
<ellipse fill="beige" stroke="black" cx="418" cy="-346" rx="46.1964" ry="18"/>
<text text-anchor="middle" x="418" y="-342.3" font-family="Times,serif" font-size="14.00">wallgraph</text>
</g>
<!-- command&#45;&gt;wallgraph -->
<g id="edge11" class="edge"><title>command&#45;&gt;wallgraph</title>
<path fill="none" stroke="black" d="M418,-416.01C418,-411.414 418,-391.644 418,-374.436"/>
<polygon fill="black" stroke="black" points="421.5,-374.211 418,-364.211 414.5,-374.211 421.5,-374.211"/>
</g>
<!-- morsedecomposition -->
<g id="node16" class="node"><title>morsedecomposition</title>
<ellipse fill="beige" stroke="black" cx="569" cy="-346" rx="86.1637" ry="18"/>
<text text-anchor="middle" x="569" y="-342.3" font-family="Times,serif" font-size="14.00">morsedecomposition</text>
</g>
<!-- command&#45;&gt;morsedecomposition -->
<g id="edge12" class="edge"><title>command&#45;&gt;morsedecomposition</title>
<path fill="none" stroke="black" d="M419.305,-416.395C428.558,-412.105 485.048,-385.918 525.908,-366.976"/>
<polygon fill="black" stroke="black" points="527.542,-370.077 535.142,-362.696 524.597,-363.726 527.542,-370.077"/>
</g>
<!-- morsegraph -->
<g id="node17" class="node"><title>morsegraph</title>
<ellipse fill="beige" stroke="black" cx="165" cy="-346" rx="53.4184" ry="18"/>
<text text-anchor="middle" x="165" y="-342.3" font-family="Times,serif" font-size="14.00">morsegraph</text>
</g>
<!-- command&#45;&gt;morsegraph -->
<g id="edge13" class="edge"><title>command&#45;&gt;morsegraph</title>
<path fill="none" stroke="black" d="M416.384,-416.553C401.262,-412.369 283.549,-379.8 214.692,-360.749"/>
<polygon fill="black" stroke="black" points="215.477,-357.334 204.905,-358.041 213.61,-364.081 215.477,-357.334"/>
</g>
<!-- parameterspec -->
<g id="node3" class="node"><title>parameterspec</title>
<ellipse fill="beige" stroke="black" cx="289" cy="-146" rx="1.8" ry="1.8"/>
</g>
<!-- ParameterJSON -->
<g id="node7" class="node"><title>ParameterJSON</title>
<ellipse fill="beige" stroke="black" cx="302" cy="-90" rx="89.5377" ry="18"/>
<text text-anchor="middle" x="302" y="-86.3" font-family="Times,serif" font-size="14.00">JSON EXPRESSION</text>
</g>
<!-- parameterspec&#45;&gt;ParameterJSON -->
<g id="edge28" class="edge"><title>parameterspec&#45;&gt;ParameterJSON</title>
<path fill="none" stroke="black" d="M289.226,-144.063C290.018,-140.77 292.777,-129.311 295.529,-117.88"/>
<polygon fill="black" stroke="black" points="298.958,-118.59 297.896,-108.049 292.152,-116.952 298.958,-118.59"/>
</g>
<!-- ParameterIndex -->
<g id="node8" class="node"><title>ParameterIndex</title>
<ellipse fill="beige" stroke="black" cx="557" cy="-90" rx="49.0941" ry="18"/>
<text text-anchor="middle" x="557" y="-86.3" font-family="Times,serif" font-size="14.00">INTEGER</text>
</g>
<!-- parameterspec&#45;&gt;ParameterIndex -->
<g id="edge29" class="edge"><title>parameterspec&#45;&gt;ParameterIndex</title>
<path fill="none" stroke="black" d="M290.442,-144.709C305.316,-141.712 431.744,-116.238 505.014,-101.475"/>
<polygon fill="black" stroke="black" points="505.871,-104.873 514.982,-99.4663 504.488,-98.0105 505.871,-104.873"/>
</g>
<!-- end -->
<g id="node4" class="node"><title>end</title>
<polygon fill="red" stroke="black" points="655.319,-10.5442 655.319,-25.4558 634.63,-36 605.37,-36 584.681,-25.4558 584.681,-10.5442 605.37,-7.10543e-15 634.63,-0 655.319,-10.5442"/>
<text text-anchor="middle" x="620" y="-14.3" font-family="Times,serif" font-size="14.00" fill="white">STOP</text>
</g>
<!-- jsonorindex -->
<g id="node5" class="node"><title>jsonorindex</title>
<ellipse fill="beige" stroke="black" cx="169" cy="-274" rx="1.8" ry="1.8"/>
</g>
<!-- json -->
<g id="node19" class="node"><title>json</title>
<ellipse fill="beige" stroke="black" cx="245" cy="-202" rx="27" ry="18"/>
<text text-anchor="middle" x="245" y="-198.3" font-family="Times,serif" font-size="14.00">json</text>
</g>
<!-- jsonorindex&#45;&gt;json -->
<g id="edge20" class="edge"><title>jsonorindex&#45;&gt;json</title>
<path fill="none" stroke="black" d="M169.854,-272.214C174.95,-267.52 201.822,-242.769 221.988,-224.195"/>
<polygon fill="black" stroke="black" points="224.613,-226.536 229.597,-217.187 219.871,-221.387 224.613,-226.536"/>
</g>
<!-- index -->
<g id="node20" class="node"><title>index</title>
<ellipse fill="beige" stroke="black" cx="169" cy="-202" rx="31.2965" ry="18"/>
<text text-anchor="middle" x="169" y="-198.3" font-family="Times,serif" font-size="14.00">index</text>
</g>
<!-- jsonorindex&#45;&gt;index -->
<g id="edge21" class="edge"><title>jsonorindex&#45;&gt;index</title>
<path fill="none" stroke="black" d="M169,-272.01C169,-267.414 169,-247.644 169,-230.436"/>
<polygon fill="black" stroke="black" points="172.5,-230.211 169,-220.211 165.5,-230.211 172.5,-230.211"/>
</g>
<!-- jsonorgraphviz -->
<g id="node6" class="node"><title>jsonorgraphviz</title>
<ellipse fill="beige" stroke="black" cx="307" cy="-274" rx="1.8" ry="1.8"/>
</g>
<!-- jsonorgraphviz&#45;&gt;json -->
<g id="edge22" class="edge"><title>jsonorgraphviz&#45;&gt;json</title>
<path fill="none" stroke="black" d="M306.304,-272.214C302.229,-267.614 281.096,-243.754 264.769,-225.32"/>
<polygon fill="black" stroke="black" points="267.38,-222.989 258.13,-217.824 262.14,-227.63 267.38,-222.989"/>
</g>
<!-- graphviz -->
<g id="node21" class="node"><title>graphviz</title>
<ellipse fill="beige" stroke="black" cx="332" cy="-202" rx="42.3701" ry="18"/>
<text text-anchor="middle" x="332" y="-198.3" font-family="Times,serif" font-size="14.00">graphviz</text>
</g>
<!-- jsonorgraphviz&#45;&gt;graphviz -->
<g id="edge23" class="edge"><title>jsonorgraphviz&#45;&gt;graphviz</title>
<path fill="none" stroke="black" d="M307.281,-272.214C308.787,-267.995 316.08,-247.575 322.357,-230"/>
<polygon fill="black" stroke="black" points="325.817,-230.719 325.884,-220.124 319.225,-228.364 325.817,-230.719"/>
</g>
<!-- ParameterJSON&#45;&gt;end -->
<g id="edge30" class="edge"><title>ParameterJSON&#45;&gt;end</title>
<path fill="none" stroke="black" d="M359.956,-76.2423C422.356,-62.5065 520.208,-40.9668 576.395,-28.5986"/>
<polygon fill="black" stroke="black" points="577.37,-31.9679 586.383,-26.3999 575.865,-25.1316 577.37,-31.9679"/>
</g>
<!-- ParameterIndex&#45;&gt;end -->
<g id="edge31" class="edge"><title>ParameterIndex&#45;&gt;end</title>
<path fill="none" stroke="black" d="M571.612,-72.7646C579.413,-64.0964 589.177,-53.2479 597.887,-43.5702"/>
<polygon fill="black" stroke="black" points="600.5,-45.8983 604.588,-36.1239 595.297,-41.2155 600.5,-45.8983"/>
</g>
<!-- dsgrn&#45;&gt;command -->
<g id="edge7" class="edge"><title>dsgrn&#45;&gt;command</title>
<path fill="none" stroke="black" d="M544.703,-616.915C514.335,-569.48 426.753,-432.673 418.609,-419.951"/>
</g>
<!-- network -->
<g id="node10" class="node"><title>network</title>
<ellipse fill="beige" stroke="black" cx="617" cy="-562" rx="39.9464" ry="18"/>
<text text-anchor="middle" x="617" y="-558.3" font-family="Times,serif" font-size="14.00">network</text>
</g>
<!-- dsgrn&#45;&gt;network -->
<g id="edge2" class="edge"><title>dsgrn&#45;&gt;network</title>
<path fill="none" stroke="black" d="M568.76,-617.465C576.754,-608.439 586.992,-596.88 595.978,-586.735"/>
<polygon fill="black" stroke="black" points="598.838,-588.784 602.849,-578.977 593.598,-584.142 598.838,-588.784"/>
</g>
<!-- FILENAME -->
<g id="node11" class="node"><title>FILENAME</title>
<ellipse fill="beige" stroke="black" cx="617" cy="-490" rx="56.3173" ry="18"/>
<text text-anchor="middle" x="617" y="-486.3" font-family="Times,serif" font-size="14.00">FILENAME</text>
</g>
<!-- network&#45;&gt;FILENAME -->
<g id="edge3" class="edge"><title>network&#45;&gt;FILENAME</title>
<path fill="none" stroke="black" d="M617,-543.697C617,-535.983 617,-526.712 617,-518.112"/>
<polygon fill="black" stroke="black" points="620.5,-518.104 617,-508.104 613.5,-518.104 620.5,-518.104"/>
</g>
<!-- draw -->
<g id="node12" class="node"><title>draw</title>
<ellipse fill="beige" stroke="black" cx="740" cy="-418" rx="28.3955" ry="18"/>
<text text-anchor="middle" x="740" y="-414.3" font-family="Times,serif" font-size="14.00">draw</text>
</g>
<!-- network&#45;&gt;draw -->
<g id="edge4" class="edge"><title>network&#45;&gt;draw</title>
<path fill="none" stroke="black" d="M638.03,-546.47C651.503,-536.559 668.86,-522.619 682,-508 699.613,-488.404 715.631,-462.962 726.349,-444.302"/>
<polygon fill="black" stroke="black" points="729.456,-445.917 731.309,-435.486 723.355,-442.484 729.456,-445.917"/>
</g>
<!-- FILENAME&#45;&gt;command -->
<g id="edge8" class="edge"><title>FILENAME&#45;&gt;command</title>
<path fill="none" stroke="black" d="M580.5,-476.161C526.641,-457.216 430.945,-423.554 419.194,-419.42"/>
</g>
<!-- FILENAME&#45;&gt;end -->
<g id="edge5" class="edge"><title>FILENAME&#45;&gt;end</title>
<path fill="none" stroke="black" d="M630.675,-472.248C650.007,-446.816 683,-396.206 683,-347 683,-347 683,-347 683,-145 683,-106.714 659.443,-68.1369 641.138,-43.9405"/>
<polygon fill="black" stroke="black" points="643.849,-41.7249 634.93,-36.0058 638.336,-46.0384 643.849,-41.7249"/>
</g>
<!-- draw&#45;&gt;end -->
<g id="edge6" class="edge"><title>draw&#45;&gt;end</title>
<path fill="none" stroke="black" d="M738.024,-399.978C735.11,-373.355 730,-320.226 730,-275 730,-275 730,-275 730,-145 730,-109.394 719.836,-99.3182 697,-72 685.019,-57.6673 668.245,-45.5082 653.41,-36.4659"/>
<polygon fill="black" stroke="black" points="654.883,-33.273 644.483,-31.247 651.35,-39.3159 654.883,-33.273"/>
</g>
<!-- parameter&#45;&gt;jsonorindex -->
<g id="edge14" class="edge"><title>parameter&#45;&gt;jsonorindex</title>
<path fill="none" stroke="black" d="M71.1877,-330.666C104.362,-311.786 159.497,-280.408 167.91,-275.62"/>
</g>
<!-- inequalities -->
<g id="node18" class="node"><title>inequalities</title>
<ellipse fill="beige" stroke="black" cx="53" cy="-274" rx="52.4675" ry="18"/>
<text text-anchor="middle" x="53" y="-270.3" font-family="Times,serif" font-size="14.00">inequalities</text>
</g>
<!-- parameter&#45;&gt;inequalities -->
<g id="edge15" class="edge"><title>parameter&#45;&gt;inequalities</title>
<path fill="none" stroke="black" d="M47.7303,-327.697C48.5017,-319.983 49.4288,-310.712 50.2888,-302.112"/>
<polygon fill="black" stroke="black" points="53.7771,-302.403 51.2896,-292.104 46.8118,-301.706 53.7771,-302.403"/>
</g>
<!-- domaingraph&#45;&gt;jsonorgraphviz -->
<g id="edge16" class="edge"><title>domaingraph&#45;&gt;jsonorgraphviz</title>
<path fill="none" stroke="black" d="M297.966,-327.697C301.187,-308.911 305.989,-280.895 306.862,-275.807"/>
</g>
<!-- wallgraph&#45;&gt;jsonorgraphviz -->
<g id="edge17" class="edge"><title>wallgraph&#45;&gt;jsonorgraphviz</title>
<path fill="none" stroke="black" d="M394.731,-330.326C364.725,-311.403 315.484,-280.35 307.973,-275.614"/>
</g>
<!-- morsedecomposition&#45;&gt;jsonorgraphviz -->
<g id="edge18" class="edge"><title>morsedecomposition&#45;&gt;jsonorgraphviz</title>
<path fill="none" stroke="black" d="M518.173,-331.42C446.744,-312.336 323.643,-279.447 308.535,-275.41"/>
</g>
<!-- morsegraph&#45;&gt;jsonorgraphviz -->
<g id="edge19" class="edge"><title>morsegraph&#45;&gt;jsonorgraphviz</title>
<path fill="none" stroke="black" d="M194.078,-330.666C232.701,-311.626 297.11,-279.875 305.977,-275.505"/>
</g>
<!-- inequalities&#45;&gt;parameterspec -->
<g id="edge25" class="edge"><title>inequalities&#45;&gt;parameterspec</title>
<path fill="none" stroke="black" d="M62.7493,-256.044C75.3678,-235.684 99.3005,-202.031 129,-184 186.515,-149.081 273.963,-147.099 287.276,-147.003"/>
</g>
<!-- json&#45;&gt;parameterspec -->
<g id="edge24" class="edge"><title>json&#45;&gt;parameterspec</title>
<path fill="none" stroke="black" d="M257.256,-185.958C268.648,-171.977 284.408,-152.636 288.17,-148.019"/>
</g>
<!-- index&#45;&gt;parameterspec -->
<g id="edge26" class="edge"><title>index&#45;&gt;parameterspec</title>
<path fill="none" stroke="black" d="M192.708,-190.331C224.948,-175.824 279.58,-151.239 287.919,-147.486"/>
</g>
<!-- graphviz&#45;&gt;parameterspec -->
<g id="edge27" class="edge"><title>graphviz&#45;&gt;parameterspec</title>
<path fill="none" stroke="black" d="M319.099,-184.798C308.016,-170.88 293.284,-152.38 289.774,-147.972"/>
</g>
</g>
</svg>
</div>
<div class="sect2">
<h3 id="_database_tutorial">Database Tutorial</h3>
<div class="paragraph">
<p><code>Signatures</code> is a program which computes databses of Morse graphs for an entire Parameter graph. Here is a demonstration.</p>
</div>
<div class="paragraph">
<p>First, we use the <code>Signatures</code> program to create an SQLite database. From the DSGRN folder, type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">&gt; mpiexec -np 5 ./software/Signatures/bin/Signatures networks/2D_Example_C.txt ./2D_Example_C.db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tada! Now we have an SQLite database. This is a small example that computes in seconds even on a laptop. So&#8230;&#8203; looks like we&#8217;re done here, everybody go home.</p>
</div>
<div class="paragraph">
<p>Just kidding! We have work to do. Let&#8217;s examine the output. How can we get at this data and how can we use it? To get the full power here, we need to use a database query language. The most widely known is called SQL, which stands for Structured Query Language, and SQLite uses this.</p>
</div>
<div class="sect3">
<h4 id="_a_crash_course_in_sql">A crash course in SQL</h4>
<div class="paragraph">
<p>Ultimately, we will have wonderful web interfaces to examine this database, but for right now, since it is an SQLite database, we can use the SQL query interface. So what follows is a tutorial to SQL, tailored to the needs of using it to query the database of dynamic sigatures computed by DSGRN.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s fire up SQLite&#8217;s interactive interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">sqlite3 2D_Example_C.db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we should see the prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">sqlite&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>So far, so good.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tables">Tables</h4>
<div class="paragraph">
<p>A database is comprised of tables; we can ask SQLite about what tables we have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; .tables</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell" data-lang="shell">MorseGraphAnnotations  MorseGraphVertices     Signatures
MorseGraphEdges        MorseGraphViz</code></pre>
</div>
</div>
<div class="paragraph">
<p>The information produced by <code>Signatures</code> is in these tables. Each table has a number of columns and rows. The columns are named. We can find out about the columns of each table by asking about the database&#8217;s "schema":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; .schema</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">CREATE TABLE Signatures (ParameterIndex INTEGER PRIMARY KEY, MorseGraphIndex INTEGER);
CREATE TABLE MorseGraphViz (MorseGraphIndex INTEGER PRIMARY KEY, Graphviz TEXT);
CREATE TABLE MorseGraphVertices (MorseGraphIndex INTEGER, Vertex INTEGER);
CREATE TABLE MorseGraphEdges (MorseGraphIndex INTEGER, Source INTEGER, Target INTEGER);
CREATE TABLE MorseGraphAnnotations (MorseGraphIndex INTEGER, Vertex INTEGER, Label TEXT);
CREATE INDEX Signatures2 on Signatures (MorseGraphIndex, ParameterIndex);
CREATE INDEX MorseGraphAnnotations3 on MorseGraphAnnotations (Label, MorseGraphIndex);
CREATE INDEX MorseGraphViz2 on MorseGraphViz (Graphviz, MorseGraphIndex);
CREATE INDEX MorseGraphVertices1 on MorseGraphVertices (MorseGraphIndex, Vertex);
CREATE INDEX MorseGraphVertices2 on MorseGraphVertices (Vertex, MorseGraphIndex);
CREATE INDEX MorseGraphEdges1 on MorseGraphEdges (MorseGraphIndex);
CREATE INDEX MorseGraphAnnotations1 on MorseGraphAnnotations (MorseGraphIndex);</code></pre>
</div>
</div>
<div class="paragraph">
<p>What we see here are the commands that were invoked to create the tables and indices. Indices are data structures formed on tables to speed up different types of queries. Indexing is extremely important; we&#8217;ll talk about it later. For now, we&#8217;ll focus on the tables. Consider the <code>Signatures</code> table. There are two columns: <code>ParameterIndex</code> and <code>MorseGraphIndex</code>. Both hold integer data. The <code>ParameterIndex</code> is marked <code>INTEGER PRIMARY KEY</code>, which tells SQLite that it doesn&#8217;t need to add its customary implicit <code>rowid</code> column; it can assume the <code>ParameterIndex</code> data can serve that function equally well (in particular, we will never attempt to insert two rows with the same <code>ParameterIndex</code> value).</p>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_things">Selecting things</h4>
<div class="paragraph">
<p>To learn more about tables we will want to see their contents. In order to get at the contents of a table, we use the <code>SELECT</code> command. Time for an example. The table <code>MorseGraphViz</code> contains a list of MorseGraphs in a somewhat human-readable graphviz format, so let&#8217;s take a look at that one.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll type</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select * from MorseGraphViz;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>*</code> here says you want to know the values for all the columns.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|digraph {
0[label="FP"];
1[label="FP ON"];
}

1|digraph {
0[label="FP ON"];
}

2|digraph {
0[label="FP ON"];
1[label="FP"];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>skip a few&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">18|digraph {
0[label="FP ON"];
1[label="FP"];
2[label="FP ON"];
3[label="FP"];
4[label="FP"];
}

19|digraph {
0[label="FP ON"];
1[label="FP"];
2[label="FP"];
3[label="FP ON"];
4[label="FP"];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>skip a few more&#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">27|digraph {
0[label="FP ON"];
1[label="FP ON"];
2[label="FP"];
3[label="FP"];
4[label="FP OFF"];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As we can see, the database computation recorded 28 distinct Morse graphs. By way of example, we notice Morse graphs 18 and 19 are isomorphic, so by distinct we mean having a distinct representation rather than not being isomorphic. Later, we will add a feature that attempts to reduce the number of Morse graphs by heuristic approaches to graph canonicalization. For now, we can query about both representations at the same time, which is a nice example anyway. We will look in the table <code>Signatures</code>, which provides a mapping between parameter indices and the Morse graphs that occur:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select * from Signatures where MorseGraphIndex=18 or MorseGraphIndex=19;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">147|18
207|18
307|18
1389|18
1390|18
1392|18
150|19
155|19
210|19
215|19
310|19
315|19
1409|19
1410|19
1412|19
1449|19
1450|19
1452|19</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_indexing">Indexing</h4>
<div class="paragraph">
<p>Let&#8217;s stop a moment and think about how the database answered that last query. Was it efficient? One approach which would be absolutely terrible is if the database software scanned the <code>Signature</code> table in entirety and returned all the matching rows. For large databases, this would be ridiculously slow. It is called a <em>full table scan</em>. Full table scans are to be prevented whenever possible. The means of preventing full table scans is <em>indexing</em>. With indexes, the database maintains a copy of the database sorted by other columns. So having sorted the <code>Signatures</code> table by the <code>MorseGraphIndex</code> column, one can pull out the matching rows extremely efficiently (just as one can look up a word in a dictionary efficiently). Looking back at the schema, we see that such an index was in fact constructed by DSGRN&#8217;s computation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">CREATE INDEX Signatures2 on Signatures (MorseGraphIndex, ParameterIndex);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thus, these sorts of queries should be fast. We can actually ask SQLite how it plans to accomplish a query, and make sure it is using our index to do it right, rather than do a full table scan:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select * from Signatures where MorseGraphIndex=18 or MorseGraphIndex=19;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SEARCH TABLE Signatures USING COVERING INDEX Signatures2 (MorseGraphIndex=?)
0|0|0|EXECUTE LIST SUBQUERY 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Seems legit. What happens if it didn&#8217;t have that index?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; drop index Signatures2;
sqlite&gt; explain query plan select * from Signatures where MorseGraphIndex=18 or MorseGraphIndex=19;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SCAN TABLE Signatures</code></pre>
</div>
</div>
<div class="paragraph">
<p>Oh no! The dreaded full table scan! Quick, rebuild the index!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; CREATE INDEX Signatures2 on Signatures (MorseGraphIndex, ParameterIndex);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s try another query. For the network we are considering, there were 4 cohorts of 400 parameters. We might only be interested in a particular cohort (i.e. ordering of thresholds) so we only care about, for instance, parameters 0 through 399. We could make a similar query, but restricted to the first 400 parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select * from Signatures where (MorseGraphIndex=18 or MorseGraphIndex=19) and ParameterIndex &lt; 400;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">147|18
207|18
307|18
150|19
155|19
210|19
215|19
310|19
315|19</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here SQLite should again use the index, first quickly determining which rows satisfy <code>MorseGraphIndex=18 or MorseGraphIndex=19</code> and then among these rows using the sorting of <code>ParameterIndex</code> to quickly retrieve the rows associated with the <code>ParameterIndex &lt; 400</code> cohort. This is a more complex usage of the index; see SQLite&#8217;s nice explanation of <a href="https://www.sqlite.org/queryplanner.html">query planning</a> for more details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_selecting_individual_columns">Selecting Individual Columns</h4>
<div class="paragraph">
<p>Back to the example. Let&#8217;s say we do not care which parameter was assigned Morse graph 18 and which was assigned 19 since they are, after all, isomorphic. We can instruct to only give the column corresponding the parameter index, dropping the column which distinguishes between 18 and 19:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select ParameterIndex from Signatures where (MorseGraphIndex=18 or MorseGraphIndex=19) and ParameterIndex &lt; 400;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">147
207
307
150
155
210
215
310
315</code></pre>
</div>
</div>
<div class="paragraph">
<p>We could also ask for the columns out of order, or the same column more than once. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select ParameterIndex,ParameterIndex,MorseGraphIndex,ParameterIndex from Signatures where (MorseGraphIndex=18 or MorseGraphIndex=19) and ParameterIndex &lt; 400;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">147|147|18|147
207|207|18|207
307|307|18|307
150|150|19|150
155|155|19|155
210|210|19|210
215|215|19|215
310|310|19|310
315|315|19|315</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_group_concatenation">Group concatenation</h4>
<div class="paragraph">
<p>We may prefer a comma separated list rather than a long column, so we can use the <code>GROUP_CONCAT</code> feature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(ParameterIndex) from Signatures where MorseGraphIndex=18 or MorseGraphIndex=19 and ParameterIndex &lt; 400;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">147,207,307,1389,1390,1392,150,155,210,215,310,315</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this seems sort of strange, good. It&#8217;s an example of an <em>aggregate function</em>, and we&#8217;ll talk about those more later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_joining_tables">Joining tables</h4>
<div class="paragraph">
<p>An important tool to use database structures is the <code>join</code>. This lets us combine two tables based on matches in a certain way. Let&#8217;s consider an example. Suppose we want to find all parameters where the Morse graph has at least 4 vertices. Since vertices in a Morse graph are indexed contiguously beginning at zero, this is the collection of parameters for which the Morse graph contains the vertex <code>3</code>. This gives us a hackish trick for quickly selecting them by querying the <code>MorseGraphVertices</code> table for <code>Vertex=3</code>. The select will be fast, since we have the following index available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">CREATE INDEX MorseGraphVertices2 on MorseGraphVertices (Vertex, MorseGraphIndex);</code></pre>
</div>
</div>
<div class="paragraph">
<p>SQLite will use this index to quickly answer the following query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(MorseGraphIndex) from MorseGraphVertices where Vertex=3;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">8,10,13,16,18,19,21,22,24,25,26,27</code></pre>
</div>
</div>
<div class="paragraph">
<p>But wait; these aren&#8217;t the parameters with Morse graphs having at least 4 vertices; these are the Morse graphs themselves. We need to turn around and look up parameters associated with these Morse graphs. Here is how <em>NOT</em> to do it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select ParameterIndex from Signatures where MorseGraphIndex=8 or MorseGraphIndex=10 or ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nope! Ack! Don&#8217;t do that. Instead, try this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; create temp table GotAtLeastFour as select MorseGraphIndex from MorseGraphVertices where Vertex=3;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now <code>GotAtLeastFour</code> is the table of results we were just considering. We told SQLite it was temporary, so it knows this isn&#8217;t going to be a permanent citizen of our database. We can use it with the <code>Signatures</code> table as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(ParameterIndex) from Signatures natural join GotAtLeastFour;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">693,713,1007,1047,1269,1270,1271,1272,1273,1391,1393,1493,990,995,1010,1015,1050,1055,122,127,182,187,282,287,288,688,821,822,861,862,866,867,868,922,927,982,986,988,1082,1087,1088,1266,1267,1268,1386,1387,1388,1488,142,202,222,227,302,322,327,328,728,732,753,1289,1290,1291,1292,1293,1411,1413,1451,1453,1513,1553,147,207,307,1389,1390,1392,150,155,210,215,310,315,1409,1410,1412,1449,1450,1452,308,312,317,692,708,717,752,1492,1512,1552,144,204,224,230,235,304,324,330,332,335,337,737,549,550,552,609,610,612,709,710,712,733,738,773,778,987</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>natural join</code> was the <a href="http://en.wikipedia.org/wiki/Join_(SQL)#Natural_join_.28.E2.8B.88.29">magic mustard</a> here. The <code>natural</code> keyword is shorthand to tell it to perform a join on the columns with the same name. A <code>join</code> is a procedure whereby two tables are combined together into a single table on the basis of matching entries.</p>
</div>
<div class="paragraph">
<p>We can get rid of that temporary table now:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; drop table GotAtLeastFour;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Good riddance. In fact, we never needed that pesky tempory table in the first place:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(ParameterIndex) from Signatures natural join (select MorseGraphIndex from MorseGraphVertices where Vertex=3);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">693,713,1007,1047,1269,1270,1271,1272,1273,1391,1393,1493,990,995,1010,1015,1050,1055,122,127,182,187,282,287,288,688,821,822,861,862,866,867,868,922,927,982,986,988,1082,1087,1088,1266,1267,1268,1386,1387,1388,1488,142,202,222,227,302,322,327,328,728,732,753,1289,1290,1291,1292,1293,1411,1413,1451,1453,1513,1553,147,207,307,1389,1390,1392,150,155,210,215,310,315,1409,1410,1412,1449,1450,1452,308,312,317,692,708,717,752,1492,1512,1552,144,204,224,230,235,304,324,330,332,335,337,737,549,550,552,609,610,612,709,710,712,733,738,773,778,987</code></pre>
</div>
</div>
<div class="paragraph">
<p>We should stay in the habit of always making sure the queries we run are efficient:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select GROUP_CONCAT(ParameterIndex) from Signatures natural join (select MorseGraphIndex from MorseGraphVertices where Vertex=3);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|1|SEARCH TABLE MorseGraphVertices USING COVERING INDEX MorseGraphVertices2 (Vertex=?)
0|1|0|SEARCH TABLE Signatures USING COVERING INDEX Signatures2 (MorseGraphIndex=?)</code></pre>
</div>
</div>
<div class="paragraph">
<p>We see its plan involves using the proper indices, so it seems right.</p>
</div>
</div>
<div class="sect3">
<h4 id="_counting_things">Counting things</h4>
<div class="paragraph">
<p>The last example was pretty fancy, so let&#8217;s do something a little more basic: counting.</p>
</div>
<div class="paragraph">
<p>There is a command <code>COUNT</code> which lets you count things:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select COUNT(*) from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">1600</code></pre>
</div>
</div>
<div class="paragraph">
<p>Those are our 1600 parameters. There is also a <code>distinct</code> keyword, which lets us select only when a new item is found. Here is an example of its use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select COUNT(distinct MorseGraphIndex) from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">28</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks great, but <em>beware!</em> You might assume these are fast operations, the former taking \(O(1)\) time and the latter taking (for an indexed table) \(O(n \log N)\) time, where \(n\) is the count returned and \(N\) is the number of rows. However, SQLite has apparently <a href="http://www.mail-archive.com/sqlite-users@sqlite.org/msg10279.html">made a deliberate design decision</a> which forces a full table scan whenever <code>COUNT</code> is used. We can actually speed up the latter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select COUNT(*) from (select distinct MorseGraphIndex from Signatures);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This still runs a full table scan with <code>COUNT</code>, but it does it on the small table returned by the interior <code>SELECT</code>. Meanwhile, the <code>select distinct MorseGraphIndex from Signatures</code> <em>does the right thing</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select distinct MorseGraphIndex from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>0|0|0|SCAN TABLE Signatures USING COVERING INDEX Signatures2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Well, hopefully does the right thing. Technically, the asymptotically best solution is based on skipping from key to key with repeated binary searches, not scanning the entire indexed table. <a href="http://sqlite.1065341.n5.nabble.com/Index-performance-td72375.html">Word on the street</a> is that this so-called skip-scan algorithm is only considered when there are more than 50 rows for each distinct value. In the current example, there are around 57 (we&#8217;ll see this later in an example), but the database is very small, so it might not bother. Definitely worth checking out as things scale up!</p>
</div>
</div>
<div class="sect3">
<h4 id="_aggregate_functions">Aggregate functions</h4>
<div class="paragraph">
<p>The two expressions we have seen, <code>GROUP_CONCAT</code> and <code>COUNT</code> are examples of what are known as <em>aggregate functions</em>. The idea of an aggregate function is that it takes a column and compresses it into a single item. If <code>A</code> is an aggregate function, then there is some seed value (for <code>GROUP_CONCAT</code> it is the empty string, for <code>COUNT</code> it is 0) and upon processing a new item it updates the value according to what it sees. For <code>GROUP_CONCAT</code> it affixes the next item with a comma delimiter. For <code>COUNT</code> it adds one.</p>
</div>
<div class="paragraph">
<p>In fact, we can combine aggregate functions together in queries in comma-concatenated lists. When we do this, we can regard vanilla column entries as aggregate functions as well: <code>MorseGraphIndex</code> can be understood as the aggregate function that reads a row and updates its value to be the entry in the <code>MorseGraphIndex</code> column. Here is an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select MorseGraphIndex,COUNT(Vertex) from MorseGraphVertices;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which yields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">27|89</code></pre>
</div>
</div>
<div class="paragraph">
<p>The 89 makes sense; this is the total number of vertices in all the Morse graphs combined. But what is the 27? It isn&#8217;t the number of Morse graphs; there are 28 of them. The answer is that it is simply the last value of the ``MorseGraphIndex`` field encountered while processing the rows with the aggregate function.</p>
</div>
<div class="paragraph">
<p>For a very ridiculous example (purely to illustrate the behavior of aggregate functions):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(MorseGraphIndex),GROUP_CONCAT(Vertex) from MorseGraphVertices;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0,0,1,2,2,3,3,3,4,4,4,5,5,6,7,7,7,8,8,8,8,9,9,9,10,10,10,10,11,11,12,12,12,13,13,13,13,14,14,15,16,16,16,16,17,17,17,18,18,18,18,18,19,19,19,19,19,20,20,20,21,21,21,21,22,22,22,22,23,23,23,24,24,24,24,25,25,25,25,25,26,26,26,26,27,27,27,27,27|0,1,0,0,1,0,1,2,0,1,2,0,1,0,0,1,2,0,1,2,3,0,1,2,0,1,2,3,0,1,0,1,2,0,1,2,3,0,1,0,0,1,2,3,0,1,2,0,1,2,3,4,0,1,2,3,4,0,1,2,0,1,2,3,0,1,2,3,0,1,2,0,1,2,3,0,1,2,3,4,0,1,2,3,0,1,2,3,4</code></pre>
</div>
</div>
<div class="paragraph">
<p>This has made comma-concatenated lists out of every <code>MorseGraphIndex</code> field and every <code>Vertex</code> field, and made a row with two columns out of them.</p>
</div>
</div>
<div class="sect3">
<h4 id="_grouping_things">Grouping things</h4>
<div class="paragraph">
<p>At this point one might get the idea that aggregate functions are a one-trick pony, good for counting the number of rows or concatenating entries from a single column but yielding nonsense in all other situations. This is because we have not yet covered the <code>GROUP BY</code> syntax, which makes aggregate functions far more useful.</p>
</div>
<div class="paragraph">
<p>The <code>GROUP BY</code> command tells a <code>SELECT</code> statement to break the rows into groups based on chosen columns. For example, <code>GROUP BY MorseGraphIndex</code> would tell SQLite you wanted to look at the table in several groups, each group having some given value in the <code>MorseGraphIndex</code> field. It automatically assumes you mean to use aggregate functions. The aggregate functions don&#8217;t process the entire table and produce a single row, but rather process each group and produce a table with rows corresponding to each group. This is quite useful.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll illustrate this by example. Let&#8217;s figure out which Morse graphs have more than 50 parameters corresponding to them. We tackle this by first creating a table with rows reporting the number of parameters associated to each Morse graph. Then we select those rows for which there are more than 50 parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select MorseGraphIndex,COUNT(*) as Frequency from Signatures group by MorseGraphIndex order by Frequency desc;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">6|418
14|266
2|204
1|126
17|74
0|70
9|69
11|64
5|50
7|47
12|33
13|30
3|23
16|22
15|16
8|12
19|12
22|12
21|10
24|8
20|7
4|6
10|6
18|6
26|4
23|3
25|1
27|1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wonderful! But how did it work? There are several new pieces of syntax. First, we see the <code>count(*) as Frequency</code>. This tells SQLite that the thing it is computing with the aggregate function <code>count(*)</code> is something that you want to refer to by the name <code>Frequency</code>. Later, we have the phrase <code>order by Frequency desc</code> which tells SQLite you want the final table to be ordered by the <code>Frequency</code> column in descending order. Finally, saving the best for last, we have the <code>group by MorseGraphIndex</code>. The <code>GROUP BY</code> feature tells SQLite that we want to break the table into groups based on the value of the <code>MorseGraphIndex</code> column. It then "evaluates" the aggregate function <code>MorseGraphIndex,COUNT(*)</code> over each group, and the output for each group is the row consisting of the <code>MorseGraphIndex</code> for the group and the number of rows in that group. Which is what we wanted! So along with <code>GROUP BY</code>, aggregate functions become powerful tools.</p>
</div>
<div class="paragraph">
<p>As a quick aside, we can now calculate the average number of parameters associated to a Morse graph by using the <code>AVG</code> aggregate function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select AVG(Frequency) from MorseGraphClasses;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">57.1428571428571</code></pre>
</div>
</div>
<div class="paragraph">
<p>Anyhow, we are now ready to give the list of all Morse graphs have more than 50 parameters corresponding to them:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(MorseGraphIndex) from (select MorseGraphIndex,count(*) as Frequency from Signatures group by MorseGraphIndex order by Frequency desc) where Frequency &gt; 50;
6,14,2,1,17,0,9,11</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_more_grouping">More grouping</h4>
<div class="paragraph">
<p>Let&#8217;s do an even more glamorous example of grouping. Let&#8217;s create a table with three columns. The first column will be <code>MorseGraphIndex</code>, the second column will be <code>Frequency</code>, and the third column will be <code>ParameterIndices</code>. Also, let&#8217;s make sure the table is sorted in descending order on the <code>Frequency</code> column.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; create temp table MorseGraphClasses as select MorseGraphIndex,COUNT(*) as Frequency,GROUP_CONCAT(ParameterIndex) from Signatures group by MorseGraphIndex order by Frequency desc;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Is this table what we want? Instead of <code>SELECT * FROM MorseGraphClasses</code>, let&#8217;s instead go with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select * from MorseGraphClasses where Frequency &lt; 10</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">24|8|549,550,552,609,610,612,709,710
20|7|777,1429,1430,1432,1469,1470,1472
4|6|372,377,1030,1035,1070,1075
10|6|990,995,1010,1015,1050,1055
18|6|147,207,307,1389,1390,1392
26|4|733,738,773,778
23|3|232,237,637
25|1|712
27|1|987</code></pre>
</div>
</div>
<div class="paragraph">
<p>Great! Just what we wanted. But is it doing it efficiently? You&#8217;d think because we told it <code>order by Frequency desc</code> it would know that it could use binary search to do this query. Nope!</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select * from MorseGraphClasses where Frequency &lt; 10;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SCAN TABLE MorseGraphClasses</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ah, the dreaded full table scan. Probably the rationale is that you could later insert rows which break this property, so it cannot make this assumption. To prevent the full table scan we could index our new table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; create index MorseGraphClasses2 on MorseGraphClasses (Frequency);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now the database software has twigged to the better plan:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select * from MorseGraphClasses where Frequency &lt; 10;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SEARCH TABLE MorseGraphClasses USING INDEX MorseGraphClasses2 (Frequency&lt;?)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_even_more_grouping">Even more grouping</h4>
<div class="paragraph">
<p>Let&#8217;s revisit the example with finding Morse graphs with a certain number of vertices. Before, we used a hackish trick that relied on the fact a Morse graph had a vertex with index \(k\) if and only if it had at least \(k+1\) vertices. Using grouping, we don&#8217;t need to rely on such tricks.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll make a table which lists each Morse graph according to the number of vertices it has in descending order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; create temp table MorseGraphVertexCount as select MorseGraphIndex,COUNT(*) as VertexCount from MorseGraphVertices group by MorseGraphIndex order by VertexCount desc;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s select the ones with more than 3 vertices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>sqlite&gt; select GROUP_CONCAT(MorseGraphIndex) from MorseGraphVertexCount where VertexCount &gt; 3;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">18,19,25,27,8,10,13,16,21,22,24,26</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the same collection of Morse graphs we found earlier, albeit in a different order.</p>
</div>
</div>
<div class="sect3">
<h4 id="_combinations_of_labels">Combinations of Labels</h4>
<div class="paragraph">
<p>Our Morse graphs come equipped with annotations. These are visible in the graphviz records, but they are also available in the <code>MorseGraphAnnotations</code> table. This lets us use the querying capabilities. We might be interested in querying for various logical combinations of annotations applied to a Morse graph, and then learning which parameters are associated.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s say we are interested in finding all parameters which have a Morse graph that has an annotation "FP OFF", an annotation "FC", but do not have the annotation "FP ON". We can accomplish this as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; create temp table HasFPOFF as select MorseGraphIndex from MorseGraphAnnotations where Label="FP OFF";
sqlite&gt; create temp table HasFC as select MorseGraphIndex from MorseGraphAnnotations where Label="FC";
sqlite&gt; create temp table HasFPON as select MorseGraphIndex from MorseGraphAnnotations where Label="FP ON";
sqlite&gt; select GROUP_CONCAT(ParameterIndex) from Signatures natural join (select * from HasFPOFF union select * from HasFC except select * from HasFPON);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">1,2,6,7,8,21,22,26,27,28,61,62,66,67,68,120,180,280,406,407,408,426,427,428,466,467,468,520,521,522,580,581,582,680,681,682,801,802,806,807,808,820,860,920,980,1080,1206,1207,1208,1220,1221,1222,1260,1261,1262,1320,1321,1322,1380,1381,1382,1480,1481,1482,121,126,128,181,186,188,281,286,526,527,528,586,587,588,686,687,826,827,828,921,926,928,981,1081,1086,1226,1227,1228,1326,1327,1328,1486,1487,0,20,60,400,401,402,420,421,422,460,461,462,800,1200,1201,1202</code></pre>
</div>
</div>
<div class="paragraph">
<p>We check the query plans to make sure this is happening efficiently:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select MorseGraphIndex from MorseGraphAnnotations where Label="FP ON";</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SEARCH TABLE MorseGraphAnnotations USING COVERING INDEX MorseGraphAnnotations3 (Label=?)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select GROUP_CONCAT(ParameterIndex) from Signatures natural join (select * from HasFPOFF union select * from HasFC except select * from HasFPON);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">3|0|0|SCAN TABLE HasFPOFF
4|0|0|SCAN TABLE HasFC
2|0|0|COMPOUND SUBQUERIES 3 AND 4 USING TEMP B-TREE (UNION)
5|0|0|SCAN TABLE HasFPON
1|0|0|COMPOUND SUBQUERIES 2 AND 5 USING TEMP B-TREE (EXCEPT)
0|0|1|SCAN SUBQUERY 1
0|1|0|SEARCH TABLE Signatures USING AUTOMATIC COVERING INDEX (MorseGraphIndex=?)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Looks good.</p>
</div>
</div>
<div class="sect3">
<h4 id="_a_lesson_in_query_planning">A Lesson in Query Planning</h4>
<div class="paragraph">
<p>It is important to make sure that the database is being efficient in answering queries. Just because there is an efficient way to do something does not mean that SQLite will translate our intent into an efficient search. We earlier saw an example where we needed to create an index to get SQLite to do the right thing. We noticed with the <code>COUNT</code> function that SQLite forced full table scans. Here we give another example where SQLite actually has the correct indices, but doesn&#8217;t do the most efficient thing. To this end we try using the <code>distinct</code> keyword with <code>GROUP_CONCAT</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(distinct MorseGraphIndex) from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">15,11,6,2,0,1,14,7,9,12,13,16,22,5,17,18,19,3,23,21,4,24,8,25,26,20,27,10</code></pre>
</div>
</div>
<div class="paragraph">
<p>This result is a little bit disturbing: it is simply the Morse graph indices occurring in the <code>Signatures</code> table in the order which they appear. This implies that SQLite chose a full table scan to satisfy this query! Let&#8217;s check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select GROUP_CONCAT(distinct MorseGraphIndex) from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SCAN TABLE Signatures</code></pre>
</div>
</div>
<div class="paragraph">
<p>A full table scan! Terrible! The culprit is the <code>GROUP_CONCAT</code> and not <code>distinct</code>, as the following shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select distinct MorseGraphIndex from Signatures;</code></pre>
</div>
</div>
<div class="paragraph">
<p>which returns</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>0
1
2
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>This indicates the query used the index efficiently:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select distinct MorseGraphIndex from Signatures;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0|0|0|SCAN TABLE Signatures USING COVERING INDEX Signatures2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Is this a bug in SQLite? Well, we could argue that SQLite believed that we were very much interested in the order the distinct <code>MorseGraphIndex</code> elements occurred, row by row, in the <code>Signatures</code> table. Thus a full table scan was required to ascertain this ordering.</p>
</div>
<div class="paragraph">
<p>So if I wanted the comma-separated list without a slow full-table scan, a solution would be</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; select GROUP_CONCAT(MorseGraphIndex) from (select distinct MorseGraphIndex from Signatures);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">sqlite&gt; explain query plan select GROUP_CONCAT(MorseGraphIndex) from (select distinct MorseGraphIndex from Signatures);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sql" data-lang="sql">1|0|0|SCAN TABLE Signatures USING COVERING INDEX Signatures2
0|0|0|SCAN SUBQUERY 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>The moral of the story here is to check the query plans, especially when you are using aggregate functions. The difference between \(O(N)\) time full table scan versus a \(O(n \log N)\) time binary search is dramatic for usual choices of \(n\) and \(N\).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_low_level_api">Low-level API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_network_interface">Network Interface</h3>
<div class="paragraph">
<p>The C++ interface for handling networks is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp" data-lang="cpp">/// Network
///   This class holds network data.
///     * Loads specification files
///     * Outputs Graphviz visualizations
///     * Provides an interface to networks
class Network {
public:
  /// load
  ///   load from network specification file
  void
  load ( const char* filename );

  /// size
  ///   Return the number of nodes in the network
  int
  size ( void ) const;

  /// index
  ///   Return index of node given name string
  int
  index ( std::string const&amp; name ) const;

  /// name
  ///   Return name of node (given by index)
  std::string const&amp;
  name ( int index ) const;

  /// inputs
  ///   Return a list of inputs to a node
  std::vector&lt;int&gt; const&amp;
  inputs ( int index ) const;

  /// outputs
  ///   Return a list of outputs to a node
  std::vector&lt;int&gt; const&amp;
  outputs ( int index ) const;

  /// logic
  ///   Return the logic of a node (given by index)
  std::vector&lt;std::vector&lt;int&gt;&gt; const&amp;
  logic ( int index ) const;

  /// interaction
  ///   Return the interaction type of an edge
  ///   False for repression, true for activation
  bool
  interaction ( int source, int target ) const;

  /// graphviz
  ///   Return a graphviz string (dot language)
  std::string
  graphviz ( std::vector&lt;std::string&gt; const&amp; theme =
  { "aliceblue", // background color
    "beige",     // node color
    "black", "darkgoldenrod", "blue", "orange", "red", "yellow" // edge group colors
  } ) const;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is more-or-less self-documenting. The methods <code>name</code> and <code>index</code> provide inverse look-up tables that give either the name of a node or its index given the other piece of information. Edges may be queried via <code>interaction</code> to see if they are activating or repressing; a query on a non-existent edge results in undefined behavior (likely a segmentation fault). The logic of a network node can be obtained through the method <code>logic</code> and the return type is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-cpp" data-lang="cpp">std::vector&lt;std::vector&lt;int&gt;&gt; const&amp;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The inner <code>std::vector&lt;int&gt;</code> represents a logic factor as an array of node indices, and the outer <code>std::vector</code> stores a logic as an array of logic factors.</p>
</div>
<div class="paragraph">
<p>The <code>graphviz</code> method returns a dot language representation of the network (see <a href="#NetworkSpecFile">Network Specification Example</a> for an example). The color theme is an array of color names starting with the background color, followed by node color, and then input factor colors (i.e. input edges are colored according to which factor they belong to in the target node&#8217;s logic). If there are more factors for some node than colors specified, then it rotates back to the first (and some groups become indistinguishable). This behavior can be used to disable the coloring of edges according to group by only giving three colors in the theme, which would then be background color, node color, and edge color.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2017-04-27 15:43:34 EDT
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/railscasts.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>